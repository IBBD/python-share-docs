# 爬虫最佳实践分享

## 爬虫的开发

爬虫的实现是以要抓取的目标信息为前提的，如果要抓取某个网站的某些的信息，则可以针对该网站开发一个爬虫，如果要抓取某个关键词的百度等搜索引擎上的信息，则可以针对百度等搜索引擎开发爬虫。

## 反爬限制

常见的反爬虫的限制有：请求headers，cookies，账户体系（封账户），验证码，请求频率限制，封IP，请求加密串，请求URL有时效性，加密信息等等，大部分反爬虫的限制都是可以突破的，只需要按照对方网站的要求来做即可，在请求上带上headers，cookies以及相应加密串参数，控制好访问频率，尽量不触发对方的反爬虫措施就可以一直抓取。

## 抓取策略

爬虫的网页抓取策略通常有两种，深度优先和广度优先，其中深度优先比较符合人的直觉，可以快速抵达最深一层页面，将数据抓取回来。对于某些中间页面多的网站层级结构，广度优先不是一个好的选择，因为需要在内存中保存大量中间信息。有些爬虫框架可以对请求的URL添加优先级，改变某些URL的抓取顺序。

## 动态页面

对于动态加载的信息，通常分为几种情况，一是数据以json(jsonp)形式嵌入在页面，这样只需要提取解析json即可，二是数据在远程服务器，并以某个HTTP API获取，此时只需要按照API参数要求请求该API获取数据，三是数据经过处理，此时可以通过selenium等模拟浏览器加载页面再提取，如果还是不行，可以通过截图和OCR的方式获取。

## 非结构化数据

对于非结构化数据的解析，比如文本，可以对其进行分词，情感分析，主题分类，摘要抽取，实体识别等等文本挖掘的处理，比如图片，可以对其进行图片分类，图片实体识别，相似图片识别等等处理，对于语音音频数据，可以先进行语音识别转化为文本后再对其进行文本挖掘处理。

## 爬虫效率

影响爬虫效率最关键的地方就是如何突破反爬虫的限制，具体可参考上述的措施；其次对于大数据集是进行分布式抓取，并保持这个分布式爬虫的稳定，可以通过一些分布式爬虫框架进行抓取，但缺点是分布式调度功能较弱，需要通过编写其他程序来加强数据的一致性和抓取的持续性。

## 扩展视野

1. http://www.jianshu.com/p/c37c46de3168?hmsr=toutiao.io&utm_medium=toutiao.io&utm_source=toutiao.io
2. https://github.com/luyishisi/Anti-Anti-Spider
3. http://mp.weixin.qq.com/s?__biz=MzI2NzI2OTExNA==&mid=2247484262&idx=1&sn=423ead267430e873a1e86dec1b531c7f&chksm=ea8025f3ddf7ace5944051a2f05c2647303c9c7daecb8d055ac28c360479c6e9d73f1cde5b08&scene=0#rd
4. https://zhuanlan.zhihu.com/p/20334680?refer=zhugeio
5. https://zhuanlan.zhihu.com/p/20336750?refer=zhugeio
6. http://www.jianshu.com/p/c0b0e55629a3
7. 
